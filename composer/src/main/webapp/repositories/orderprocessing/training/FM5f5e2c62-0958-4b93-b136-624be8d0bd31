<?xml version="1.0" encoding="UTF-8"?>
<!-- process1 BPEL Process [Generated by the MAGUS Mashup tool]  -->
<bpel:process name="process1"
		targetNamespace="http://magus.online/repositories/orderprocessing/wsdl/process1"
		suppressJoinFailure="yes"
		xmlns:tns="http://magus.online/repositories/orderprocessing/wsdl/process1"
		xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
		>
	<!-- ================================================================= -->
	<!-- PARTNERLINKS                                                      -->
	<!-- List of services participating in this BPEL process               -->
	<!-- ================================================================= -->
	<bpel:partnerLinks>
		<bpel:partnerLink name="RequestInvoiceCreationPSSS"  partnerRole="RequestInvoiceCreationPSSSService" myRole="edu.ls3.magus.cl.mashupconfigurator.service.Service@7d6f77cc"  partnerLinkType="http://magus.online/repositories/orderprocessing/services/RequestInvoiceCreationPSSS.xml"/>
		<bpel:partnerLink name="RequestProductionSchedule"  partnerRole="RequestProductionScheduleService" myRole="edu.ls3.magus.cl.mashupconfigurator.service.Service@50134894"  partnerLinkType="http://magus.online/repositories/orderprocessing/services/RequestProductionSchedule.xml"/>
		<bpel:partnerLink name="SendProductionSchedule"  partnerRole="SendProductionScheduleService"   partnerLinkType="http://magus.online/repositories/orderprocessing/services/SendProductionSchedule.xml"/>
		<bpel:partnerLink name="RequestEligibleShipping"  partnerRole="RequestEligibleShippingService"   partnerLinkType="http://magus.online/repositories/orderprocessing/services/RequestEligibleShipping.xml"/>
		<bpel:partnerLink name="RequestShippingPS"  partnerRole="RequestShippingPSService"   partnerLinkType="http://magus.online/repositories/orderprocessing/services/RequestShippingPS.xml"/>
		<bpel:partnerLink name="SendShippingSchedulePS"  partnerRole="SendShippingSchedulePSService"   partnerLinkType="http://magus.online/repositories/orderprocessing/services/SendShippingSchedulePS.xml"/>
		<bpel:partnerLink name="PayPal"  partnerRole="PayPalService"   partnerLinkType="http://magus.online/repositories/orderprocessing/services/PayPal.xml"/>
		<bpel:partnerLink name="ConvertCurrency"  partnerRole="ConvertCurrencyService"   partnerLinkType="http://magus.online/repositories/orderprocessing/services/ConvertCurrency.xml"/>
	</bpel:partnerLinks>
	
	<!-- ================================================================= -->
	<!-- VARIABLES                                                         -->
	<!-- List of messages and XML documents used within this BPEL process  -->
	<!-- ================================================================= --> 
	<bpel:variables> 
	</bpel:variables>
	<bpel:faultHandlers>
	</bpel:faultHandlers>
	<!-- ================================================================= -->
	<!-- ORCHESTRATION LOGIC                                               -->
	<!-- Set of activities coordinating the flow of messages across the    -->
	<!-- services integrated within this business process                  -->
	<!-- ================================================================= -->
	<bpel:sequence name="main">
		<bpel:receive operation="--"   variable="" createInstance="yes" />
		<bpel:flow>
			<bpel:links>
			</bpel:links>
			<bpel:sequence>
				<bpel:invoke operation="RequestInvoiceCreationPSSS" partnerLink="RequestInvoiceCreationPSSS"  inputVariable="po,c"   >
				</bpel:invoke>
				<bpel:flow>
					<bpel:links>
						<bpel:link name="50529ff1-0564-4a47-b44f-5dee9ecd464b" />
					</bpel:links>
					<bpel:sequence>
						<bpel:invoke operation="RequestProductionSchedule" partnerLink="RequestProductionSchedule"  inputVariable="po"   >
						</bpel:invoke>
						<bpel:receive operation="RequestProductionSchedule" partnerLink="RequestProductionScheduleCallback"  variable="p" >
						<bpel:sources>
							<bpel:source linkName="50529ff1-0564-4a47-b44f-5dee9ecd464b" />
						</bpel:sources>
						</bpel:receive>
						<bpel:invoke operation="SendProductionSchedule" partnerLink="SendProductionSchedule"  inputVariable="p"   >
						</bpel:invoke>
					</bpel:sequence>
					<bpel:sequence>
						<bpel:invoke operation="RequestEligibleShipping" partnerLink="RequestEligibleShipping"  inputVariable="po"    outputVariable="co" >
						</bpel:invoke>
						<bpel:invoke operation="RequestShippingPS" partnerLink="RequestShippingPS"  inputVariable="co,p,po"    outputVariable="s" >
						<bpel:targets>
							<bpel:target linkName="50529ff1-0564-4a47-b44f-5dee9ecd464b" />
						</bpel:targets>
						</bpel:invoke>
						<bpel:invoke operation="SendShippingSchedulePS" partnerLink="SendShippingSchedulePS"  inputVariable="s"   >
						</bpel:invoke>
					</bpel:sequence>
				</bpel:flow>
				<bpel:receive operation="RequestInvoiceCreationPSSS" partnerLink="RequestInvoiceCreationPSSSCallback"  variable="i" >
				</bpel:receive>
				<bpel:flow>
					<bpel:links>
					</bpel:links>
					<bpel:invoke operation="PayPal" partnerLink="PayPal"  inputVariable="i,pi"   >
					</bpel:invoke>
					<bpel:invoke operation="ConvertCurrency" partnerLink="ConvertCurrency"  inputVariable="po,i"   >
					</bpel:invoke>
				</bpel:flow>
			</bpel:sequence>
		</bpel:flow>
		<bpel:reply operation="--"   variable="" />
	</bpel:sequence>
</bpel:process>
